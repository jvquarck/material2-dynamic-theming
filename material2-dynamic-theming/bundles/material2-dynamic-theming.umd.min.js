!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-color"),require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("material2-dynamic-theming",["exports","d3-color","@angular/common","rxjs","rxjs/operators","@angular/core"],e):e(t["material2-dynamic-theming"]={},t.d3Color,t.ng.common,t.rxjs,t.rxjs.operators,t.ng.core)}(this,function(t,i,e,r,o,n){"use strict";var a={Default:"default",Lighter:"lighter",Darker:"darker",Hover:"hover"},u={primary:"#3F51B5",secondary:"#FFD31F",dark:"#616161",warn:"#F44336"},g={autoAdjust:!1,brightnessFactor:245},p=function(){return(p=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},f=Object.values(a);function s(t,e,r){var o=1-r,n=i.color(t).rgb(),a=i.color(e).rgb();return i.rgb(Math.round(n.r+(a.r-n.r)*o),Math.round(n.g+(a.g-n.g)*o),Math.round(n.b+(a.b-n.b)*o)).hex()}function l(t,e){try{return s(t,"#000000",e)}catch(r){return console.warn("d3-color","darker","Wrong color "+t+" provided"),t}}function m(t,e){try{return s(t,"#FFFFFF",e)}catch(r){return console.warn("d3-color","brighter","Wrong color "+t+" provided"),t}}function c(t){var e=t;if(t&&"object"==typeof t)for(var r in e="[object Array]"===Object.prototype.toString.call(t)?[]:{},t)e[r]=c(t[r]);return e}function d(t,e){if(/^([A-Za-z\d]+\.?)*$/.test(e)){var r=e.split(".");if(t.hasOwnProperty(r[0]))return 1===r.length?t[r[0]]:d(t,r.slice(1).join("."))}}var h=function(){function c(){}return c.getColorsFromBase=function(t){return[c.getColorString(t),c.getColorString(m(t,.4)),c.getColorString(l(t,.4)),c.getColorString(m(t,1))]},c.getColorsFromLightColor=function(t){return[c.getColorString(t),c.getColorString(l(t,.9)),c.getColorString(l(t,.7)),c.getColorString(l(t,.5))]},c.getColorString=function(t){var e=i.rgb(t);return e.r+","+e.g+","+e.b},c.getRandomHex=function(){return c.getHexValueFromColor(Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random()))},c.getCustomProperties=function(t,e){var r=getComputedStyle(t.nativeElement);return e.map(function(t){return r.getPropertyValue(t)})},c.setCustomProperties=function(e,r){Object.keys(r).forEach(function(t){e.nativeElement.style.setProperty(t,r[t])})},c.setPaletteCustomProperties=function(t,r,e,o){o=p({},g,o),r||console.error(this,"paletteValues should be <string | PaletteValues>",r);var n=c.getHexValueFromColor("string"==typeof r?r:r["default"]),a=o.autoAdjust&&c.getIsBright(n,o.brightnessFactor)?c.getColorsFromLightColor(n):c.getColorsFromBase(n),i=a.map(c.getHexValueFromColor).map(c.getForegroundColorW3C).map(c.getColorString),u={},s=c.getPaletteCustomPropertiesNames(e,!1);s.forEach(function(t,e){return u[s[e]]=r[f[e]]||a[e]});var l=c.getPaletteCustomPropertiesNames(e,!0);l.forEach(function(t,e){return u[l[e]]=d(r,"contrast."+l[e])||i[e]}),c.setCustomProperties(t,u)},c.getPaletteCustomPropertiesNames=function(t,e){void 0===e&&(e=!1);var r=e?"contrast-":"";return["--"+t+"-palette-"+r+"default","--"+t+"-palette-"+r+"lighter","--"+t+"-palette-"+r+"darker","--"+t+"-palette-"+r+"hover"]},c.getHexValueFromColor=function(t){if(!t.includes("#")){var e=t.replace(/\s/gi,"").split(",").map(function(t){return parseInt(t)});t=i.rgb(e[0],e[1],e[2]).hex()}return t},c.getForegroundColorW3C=function(t){return c.getIsBright(t,200)?"#000000":"#FFFFFF"},c.getIsBright=function(t,e){var r=i.rgb(t);return e<Math.round((299*r.r+587*r.g+114*r.b)/1e3)},c}(),C=function(){function t(t,e){this.appRef=t,this.document=e,this.currentPalettes$=new r.BehaviorSubject(u)}return t.prototype.setThemingPalette=function(t,e,r,o){h.setPaletteCustomProperties(t,e,r,o)},t.prototype.setThemingPaletteForRoot=function(t,e,r){h.setPaletteCustomProperties(this.rootElementRef,t,e,r),h.setPaletteCustomProperties(this.rootElementRef,t,e+"-root",r);var o=c(this.currentPalettes$.value);o[e]=t,this.currentPalettes$.next(o)},t.prototype.getPaletteObservable=function(t){return this.currentPalettes$.pipe(o.pluck(t),o.distinctUntilChanged())},t.prototype.getDOMPaletteValues=function(t,e){void 0===e&&(e=this.rootElementRef);var r=h.getCustomProperties(e,h.getPaletteCustomPropertiesNames(t,!0)),o=h.getCustomProperties(e,h.getPaletteCustomPropertiesNames(t,!0));return{"default":r[0],lighter:r[1],darker:r[2],hover:r[3],contrast:{"default":o[0],lighter:o[1],darker:o[2],hover:o[3]}}},t.prototype.getPalette=function(t){return this.currentPalettes$.value[t]},t.prototype.initThemingPalettes=function(){var e=this;Object.keys(this.currentPalettes$.value).forEach(function(t){h.setPaletteCustomProperties(e.rootElementRef,u[t],t),h.setPaletteCustomProperties(e.rootElementRef,u[t],t+"-root")})},t.prototype.initThemeDemo=function(){},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n.ApplicationRef},{type:undefined,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(n.ApplicationRef),n.inject(e.DOCUMENT))},token:t,providedIn:"root"}),t}(),P=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[],imports:[],exports:[]}]}],t}();t.ThemingService=C,t.ThemingModule=P,t.Palettes={primary:"primary",secondary:"secondary",warn:"warn",dark:"dark"},t.CommonPaletteValues=a,t.OPACITY_FACTOR=.4,t.HOVER_OPACITY_FACTOR=.2,t.FOREGROUND_COLORS_BRIGHT_FACTOR=200,t.BACKGROUND_COLORS_BRIGHT_FACTOR=245,t.AUTO_GENERATE_FOREGROUNDS=!0,t.DEFAULT_THEME_PALETTES=u,t.DEFAULT_THEMING_EXTRA_OPTIONS=g,t.getSolidColorFromOpacityBackground=s,t.getDarkerColor=l,t.getBrighterColor=m,t.shallowCopy=function y(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},t.deepCopy=c,t.getProperty=d,t.DARKENING_K=.4,t.BRIGHTEN_K=.4,t.BRIGHTEN_HOVER_K=1,t.LIGHT_LIGHTEN_K=.9,t.LIGHT_DARKEN_K=.7,t.LIGHT_HOVER_K=.5,t.ThemingUtil=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=material2-dynamic-theming.umd.min.js.map