/**
Important! this file monkey-patches angular material and should be imported after `@import '~@angular/material/theming';` and `@include mat-core();`
 */


/**
  Detect if the $var is a css custom property (css variables)
 */
 @function is-custom-property($var) {
  @if (str-index(inspect($var), 'var') != null) {
    @return true;
  } @else {
    @return false;
  }
}

@function mat-color($palette, $hue: default, $opacity: null) {
  @if type-of($hue) == number and $hue >= 0 and $hue <= 1 {
    @return mat-color($palette, default, $hue);
  }

  $color: map-get($palette, $hue);

  @if (is-custom-property($color)) {
    $opacity: if($opacity == null, 1, $opacity);
  } @else {
    $opacity: if($opacity == null, opacity($color), $opacity);
  }

  @if (type-of($color) == color) {
    @return rgba($color, $opacity);
  } @else {
    @return #{"rgba(#{$color}, #{$opacity})"};
  }
} // Monkey-patches: ~/@angular/material/_theming.scss @ mat-color


/* @function mat-contrast($palette, $hue) {
  @return map-get(map-color($palette, contrast), $hue, 1);
} */ // Monkey-patches: ~/@angular/material/_theming.scss @ mat-contrast

// -> from ~/@angular/material/_theming.scss
// TODO: review if we broke some modifier
@mixin _mat-datepicker-color($palette) {
  .mat-calendar-body-selected {
    background-color: mat-color($palette);
    color: mat-color($palette, default-contrast);
  }

  .mat-calendar-body-disabled > .mat-calendar-body-selected {
    background-color: mat-color($palette);
  }

  .mat-calendar-body-today.mat-calendar-body-selected {
    box-shadow: inset 0 0 0 $mat-datepicker-selected-today-box-shadow-width
    mat-color($palette, default-contrast);
  }
} // Monkey-patches: ~/@angular/material/_theming.scss @ _mat-datepicker-color

@mixin mat-datetimepicker-theme($theme) {

  $primary: map-get($theme, primary);

  .mat-datetimepicker-calendar-header {
    background-color: mat-color($primary);
  }

  .mat-datetimepicker-calendar-body-cell-content {
    &.mat-datetimepicker-calendar-body-selected {
      background-color: mat-color($primary);
      color: white;
    }

    &.mat-datetimepicker-calendar-body-disabled > .mat-datetimepicker-calendar-body-selected {
      // background-color: mat-color($primary);
      @if (is-custom-property($primary)) {
        background-color: mat-color($primary);
      } @else {
        background-color: rgba(map-get($primary), 0.4);
      }
    }

    &.mat-datetimepicker-calendar-body-today {
      &:not(.mat-datetimepicker-calendar-body-selected) {
        border-color: mat-color($primary);
      }

      &.mat-datetimepicker-calendar-body-selected {
        box-shadow: inset 0 0 0 $mat-datetimepicker-selected-today-box-shadow-width mat-color($primary, default-contrast);
      }
    }
  }

  .mat-datetimepicker-clock-center {
    background-color: mat-color($primary);
  }

  .mat-datetimepicker-clock-hand {
    background-color: mat-color($primary);

    &::before {
      background-color: mat-color($primary);
    }
  }

  .mat-datetimepicker-clock-cell {
    &.mat-datetimepicker-clock-cell-selected {
      @if (is-custom-property($primary)) {
        background-color: mat-color($primary);
      } @else {
        background-color: lighten(mat-color($primary), 5);
      }
    }
  }
} // Monkey-patches: ~/@mat-datetimepicker/core/datetimepicker/datetimepicker-theme.scss @ mat-datetimepicker-theme
